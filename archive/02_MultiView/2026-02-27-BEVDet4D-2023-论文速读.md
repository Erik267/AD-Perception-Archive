---
date: 2026-02-27
keywords: [BEVDet4D, Temporal LSS, BEVDet, Phigent Robotics]
tags: [Level-02, Perception-Hardcore, Engineering-Standard]
---

# BEVDet4D-è®ºæ–‡é€Ÿè¯»

## 0. åŸºæœ¬ä¿¡æ¯
- **å‘è¡¨æ—¶é—´**: 2022å¹´ (2023å¹´æŒç»­æ›´æ–°)
- **ä½œè€…å•ä½**: é‰´æ™ºæœºå™¨äºº (Phigent Robotics)
- **ä»£ç ä»“åº“**: [https://github.com/HuangJunJie2017/BEVDet](https://github.com/HuangJunJie2017/BEVDet)
- **Tags**: #æ—¶åºLSS #é‡äº§æ„ŸçŸ¥ #æé€ŸBEV #Phigent

---

## 1. ğŸ”ª ä»Šæ—¥é”è¯„
> **BEVDet4D** æŠŠ LSS ä»â€œè®ºæ–‡â€å¸¦å‘äº†â€œè½¦ç«¯â€ã€‚
> 
> **æ ¸å¿ƒæ´å¯Ÿ**ï¼šå®ƒè§£å†³äº† LSS æ¶æ„è½åœ°æœ€å¤´ç–¼çš„ä¸¤ä¸ªé—®é¢˜ï¼š**æ…¢**å’Œ**ä¸ç¨³**ã€‚å®ƒé€šè¿‡ **Temporal Feature Alignment**ï¼Œåªç”¨æå°çš„è®¡ç®—ä»£ä»·ï¼ˆä¸€æ¬¡ç½‘æ ¼é‡‡æ ·ï¼‰å°±æ¢å–äº†å·¨å¤§çš„è¿åŠ¨è¯­ä¹‰æ”¶ç›Šã€‚
> 
> **æ„ŸçŸ¥å·¥ç¨‹å¸ˆç¬”è®°**ï¼šå¦‚æœä½ éœ€è¦åœ¨ Orin ä¸Šè·‘ä¸€å¥—æœ€ç¨³çš„ LSS æ–¹æ¡ˆï¼Œåˆ«çœ‹åˆ«çš„ï¼Œç›´æ¥æŠ„ BEVDet4D çš„ä½œä¸šã€‚

---

## 2. ğŸ—ï¸ æ¨¡å‹æ¶æ„ (Architecture Map)
![BEVDet4D Architecture](https://github.com/HuangJunJie2017/BEVDet/raw/master/figs/bevdet4d.png)
*Figure 1: BEVDet4D æ‹“æ‰‘å›¾ã€‚é‡ç‚¹åœ¨äº BEV ç©ºé—´çš„ Feature Warping å’Œæ—¶åºç‰¹å¾èåˆå±‚ã€‚*

### **è¯¦ç»†æ–‡å­—æè¿°ï¼š**
1. **LSS-based Encoder**: é‡‡ç”¨ä¼˜åŒ–åçš„ LSS (BEVPoolv2) å°†å›¾åƒè½¬ä¸º BEVã€‚
2. **Temporal Alignment (æ ¸å¿ƒ)**: 
   - ç»´æŠ¤ä¸€ä¸ª BEV ç¼“å†²åŒºï¼ˆBufferï¼‰ã€‚
   - å°†ä¸Šä¸€å¸§ BEV ç‰¹å¾é€šè¿‡ `grid_sample` æŒ‰ç…§è‡ªè½¦è¿åŠ¨è¡¥å¿åˆ°å½“å‰å¸§ã€‚
3. **Fusion Layer**: ç®€å•çš„ $3 	imes 3$ å·ç§¯æˆ–æ®‹å·®å—ï¼Œå°†å½“å‰ BEV ä¸å¯¹é½åçš„å†å² BEV æ‹¼æ¥èåˆã€‚
4. **Heads**: ä¼ ç»Ÿçš„ CenterPoint é£æ ¼æ£€æµ‹å¤´ã€‚

---

## 3. ğŸ’¡ æ ¸å¿ƒåˆ›æ–° (Math & Pseudo-code)

### 3.1 æ—¶åºç‰¹å¾èåˆ (Temporal Fusion)
**ç‰©ç†é€»è¾‘**ï¼šåœ¨ç»Ÿä¸€çš„å…¨å±€ä¸–ç•Œåæ ‡ç³»ä¸‹ï¼Œé€šè¿‡ `warp_grid` è¿›è¡Œç‰¹å¾æ¬è¿ã€‚

**PyTorch é£æ ¼ä¼ªä»£ç å®ç°**ï¼š
```python
def forward_4d(feat_curr, feat_prev, pose_curr, pose_prev):
    # 1. è®¡ç®—è‡ªè½¦è¿åŠ¨å¯¼è‡´çš„ç½‘æ ¼åç§»
    relative_pose = pose_curr.inverse() @ pose_prev
    grid = calculate_warp_grid(relative_pose)
    
    # 2. ç©ºé—´é‡é‡‡æ · (Warping)
    feat_prev_aligned = F.grid_sample(feat_prev, grid)
    
    # 3. ç‰¹å¾çº§è”
    # [B, 2*C, H, W]
    fused_feat = torch.cat([feat_curr, feat_prev_aligned], dim=1)
    
    # 4. é™ç»´å›å½’
    return self.fusion_conv(fused_feat)
```

---

## 5. ğŸ“Š å…³é”®æŒ‡æ ‡ (nuScenes)
- **é€Ÿåº¦**: åœ¨ RTX 3090 ä¸Šå¯è¾¾ **70+ FPS**ï¼Œåœ¨ Orin-X ä¸Šå¯æ»¡å¸§è¿è¡Œã€‚
- **ç¨³å®šæ€§**: ç›¸æ¯”å•å¸§ BEVDetï¼Œé€Ÿåº¦ä¼°è®¡è¯¯å·®é™ä½äº† **35%**ã€‚

---

## 10. ğŸ› ï¸ è½åœ°å»ºè®®
- **BEVPoolv2**: å¿…é¡»ä½¿ç”¨ä½œè€…å¼€æºçš„ **BEVPoolv2 CUDA Kernel**ï¼Œè¿™æ˜¯ç›®å‰è¡Œä¸šå†…æœ€å¿«çš„ LSS é¢„å¤„ç†ç®—å­ã€‚
- **å¤šå¸§èåˆ**: å»ºè®®æ‰©å±•åˆ° 3-5 å¸§èåˆï¼Œèƒ½æ˜¾è‘—æå‡è¿œç«¯å¤§å¡è½¦çš„å¬å›ç‡ã€‚
