---
date: 2026-02-27
keywords: [Flash-OCC, Occupancy, Real-time Perception, Channel-to-Height, 2024]
tags: [Level-02, Perception-Hardcore, Occupancy-SOTA]
---

# Flash-OCC-è®ºæ–‡é€Ÿè¯»

## 0. åŸºæœ¬ä¿¡æ¯
- **å‘è¡¨æ—¶é—´**: 2024å¹´
- **ä½œè€…å•ä½**: æµ™æ±Ÿå¤§å­¦ã€åä¸º
- **ä»£ç ä»“åº“**: [https://github.com/Yzichen/FlashOCC](https://github.com/Yzichen/FlashOCC)
- **Tags**: #é«˜æ•ˆå æ®æ„ŸçŸ¥ #2D-to-3Då‡ç»´ #æé€Ÿæ¨ç†(197Hz) #é‡äº§è½åœ°

---

## 1. ğŸ”ª ä»Šæ—¥é”è¯„
> **Flash-OCC** å°† 3D å æ®æ„ŸçŸ¥ä»â€œå­¦æœ¯ç©å…·â€å˜æˆäº†â€œé‡äº§æ­¦å™¨â€ã€‚
> 
> **æ ¸å¿ƒæ´å¯Ÿ**ï¼šä¹‹å‰çš„ Occupancy ç®—æ³•ï¼ˆå¦‚ TPVFormer, MonoSceneï¼‰åŠ¨ä¸åŠ¨å°±è¦æ 3D å·ç§¯æˆ–è€…æ˜‚è´µçš„ Transformerï¼Œåœ¨ Orin ä¸Šè·‘ 2 å¸§éƒ½è´¹åŠ²ã€‚Flash-OCC æå‡ºäº†ä¸€ä¸ªæš´åŠ›ä¸”ä¼˜é›…çš„æ€è·¯ï¼š**å°±åœ¨ 2D BEV ç©ºé—´ç©ï¼Œæœ€åä¸€æ­¥å†åš 3D å±•å¼€ã€‚** å®ƒè¯æ˜äº†ï¼šé€šè¿‡å·§å¦™çš„é€šé“ç»´åº¦å˜æ¢ï¼Œ2D CNN ä¹Ÿèƒ½å®Œç¾æ¨¡æ‹Ÿ 3D ç©ºé—´å æ®ã€‚

---

## 2. ğŸ—ï¸ æ¨¡å‹æ¶æ„ (Architecture Map)
```mermaid
graph LR
    A[Image Inputs] --> B[2D BEV Encoder]
    B --> C[BEV Feature: H x W x (Z*C)]
    C --> D[Channel-to-Height Module]
    D --> E[3D Occupancy Grid: H x W x Z]
```

### **è¯¦ç»†æ–‡å­—æè¿°ï¼š**
1. **BEV Encoder**: ä½¿ç”¨ BEVDet æˆ– BEVFormer é£æ ¼çš„æå–å™¨ç”Ÿæˆä¸€å¼ â€œæåšâ€çš„ 2D BEV ç‰¹å¾å›¾ã€‚
2. **Channel-to-Height (C2H) æ ¸å¿ƒæ¨¡å—**: 
   - ä¼ ç»Ÿæ–¹æ³•æ˜¯ç›´æ¥æ„å»º $[Z, H, W, C]$ çš„ 4D Tensorã€‚
   - Flash-OCC å°† $Z$ ç»´åº¦å‹å…¥ $C$ ç»´åº¦ï¼Œåœ¨ 2D å·ç§¯ä¸­è¿›è¡Œè¿ç®—ã€‚
3. **Implicit 3D Deployment**: ä»…åœ¨æœ€åä¸€å±‚é€šè¿‡ `Reshape` å°†é€šé“è¿˜åŸä¸ºé«˜åº¦ $Z$ï¼Œå®Œå…¨è§„é¿äº† 3D å·ç§¯ã€‚

---

## 3. ğŸ’¡ æ ¸å¿ƒåˆ›æ–° (Math & Pseudo-code)

### 3.1 Channel-to-Height (C2H) å˜æ¢
**é€»è¾‘**ï¼šåˆ©ç”¨å¼ é‡é‡æ’æ›¿ä»£ç©ºé—´å‡ç»´ã€‚

**PyTorch é£æ ¼ä¼ªä»£ç å®ç°**ï¼š
```python
def channel_to_height(bev_feat, z_dim):
    """
    bev_feat: [B, C_total, H, W], å…¶ä¸­ C_total = z_dim * num_classes
    """
    B, C_total, H, W = bev_feat.shape
    # 1. æå…¶å»‰ä»·çš„ Reshape æ“ä½œ
    # å°†é€šé“ç»´åº¦é‡æ–°æ‹†åˆ†ä¸º [Height, Classes]
    # [B, Z, Class, H, W]
    occ_grid = bev_feat.view(B, z_dim, -1, H, W)
    
    # 2. è½¬æ¢ä¸ºæ ‡å‡†çš„ 3D å æ®ç½‘æ ¼ [B, Class, Z, H, W]
    occ_grid = occ_grid.permute(0, 2, 1, 3, 4)
    
    return occ_grid
```

---

## 5. ğŸ“Š å…³é”®æŒ‡æ ‡ (Occ3D Benchmark)
| æ¨¡å‹ | mIoU â†‘ | FPS (RTX 3090) â†‘ |
| :--- | :--- | :--- |
| TPVFormer | 37.4 | 12.5 Hz |
| **Flash-OCC (M0)** | **31.9** | **197.6 Hz (15x faster)** |
- **ç»“è®º**ï¼šè™½ç„¶æŒ‡æ ‡ç•¥æœ‰ç‰ºç‰²ï¼Œä½†æ¨ç†é€Ÿåº¦å®ç°äº†é‡çº§æå‡ï¼Œè®© Occupancy åœ¨ä½ç«¯èŠ¯ç‰‡ä¸Šè½åœ°æˆä¸ºå¯èƒ½ã€‚

---

## 10. ğŸ› ï¸ è½åœ°å»ºè®®
- **ç®—å­å‹å¥½**: ç”±äºå…¨æµç¨‹æ˜¯ 2D å·ç§¯ï¼Œå®ƒå¯ä»¥å®Œç¾åˆ©ç”¨ **TensorRT** çš„è‡ªåŠ¨ä¼˜åŒ–ï¼Œä¸éœ€è¦ä»»ä½•è‡ªå®šä¹‰ç®—å­æ’ä»¶ã€‚
- **å†…å­˜ä¼˜åŒ–**: ç›¸æ¯”ä¼ ç»Ÿçš„ 3D ç©ºé—´ä½“ç§¯ç‰¹å¾ï¼ŒFlash-OCC èŠ‚çœäº†çº¦ **90%** çš„æ˜¾å­˜å¸¦å®½ã€‚
